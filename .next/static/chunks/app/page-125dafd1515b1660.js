(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5306:function(e,t,n){Promise.resolve().then(n.bind(n,2030)),Promise.resolve().then(n.t.bind(n,9671,23))},2030:function(e,t,n){"use strict";n.d(t,{JokesList:function(){return o}});var i=n(7437),s=n(2265),a=n(2401),r=n.n(a);let o=e=>{let{jokes:t}=e,[n,a]=(0,s.useState)(t),[o,l]=(0,s.useState)({setup:"",punchline:"",type:"",rating:""}),[c,u]=(0,s.useState)(!1),[h,d]=(0,s.useState)(1),[p,j]=(0,s.useState)(null),x=[...n].sort((e,t)=>{if(null!==p){let n=p.key;if(e[n]<t[n])return"asc"===p.direction?-1:1;if(e[n]>t[n])return"asc"===p.direction?1:-1}return 0}),k=async()=>{let e=await fetch("api/jokes",{cache:"no-cache"}),{jokes:t}=await e.json();a(t)},_=async e=>{e.preventDefault(),u(!0);try{(await fetch("/api/jokes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)})).ok&&(l({setup:"",punchline:"",type:"",rating:""}),k()),u(!1)}catch(e){console.error("Failed to add joke",e)}},g=async e=>{u(!0);try{(await fetch("/api/jokes",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})})).ok&&k(),u(!1)}catch(e){console.error("Failed to delete joke",e)}},y=e=>{let t="asc";p&&p.key===e&&"asc"===p.direction&&(t="desc"),j({key:e,direction:t})},f=5*h,b=x.slice(f-5,f),m=Math.ceil(n.length/5);return(0,i.jsxs)("div",{className:r().container,children:[(0,i.jsx)("h1",{children:"Jokes List"}),(0,i.jsxs)("table",{className:r().table,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{onClick:()=>y("setup"),children:"Setup"}),(0,i.jsx)("th",{onClick:()=>y("punchline"),children:"Punchline"}),(0,i.jsx)("th",{onClick:()=>y("type"),children:"Type"}),(0,i.jsx)("th",{onClick:()=>y("rating"),children:"Rating"}),(0,i.jsx)("th",{children:"Actions"})]})}),(0,i.jsx)("tbody",{children:b.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.setup}),(0,i.jsx)("td",{children:e.punchline}),(0,i.jsx)("td",{children:e.type}),(0,i.jsx)("td",{children:e.rating}),(0,i.jsx)("td",{children:(0,i.jsx)("button",{onClick:()=>g(e._id.toString()),className:r().button,children:"Delete"})})]},e._id.toString()))})]}),(0,i.jsx)("div",{className:r().pagination,children:(()=>{let e=[];for(let t=1;t<=m;t++)e.push((0,i.jsx)("button",{onClick:()=>d(t),className:r().pageButton,children:t},t));return e})()}),c&&(0,i.jsx)("p",{children:"Loading..."}),(0,i.jsxs)("form",{className:r().form,onSubmit:_,children:[(0,i.jsx)("h2",{children:"Add a New Joke"}),(0,i.jsx)("input",{type:"text",placeholder:"Setup",value:o.setup,onChange:e=>l({...o,setup:e.target.value}),required:!0}),(0,i.jsx)("input",{type:"text",placeholder:"Punchline",value:o.punchline,onChange:e=>l({...o,punchline:e.target.value}),required:!0}),(0,i.jsx)("input",{type:"text",placeholder:"Type",value:o.type,onChange:e=>l({...o,type:e.target.value}),required:!0}),(0,i.jsx)("input",{type:"number",placeholder:"Rating",value:o.rating,onChange:e=>l({...o,rating:e.target.value}),required:!0}),(0,i.jsx)("button",{type:"submit",children:"Add Joke"})]})]})}},2401:function(e){e.exports={container:"JokesList_container__kWht0",table:"JokesList_table__4r4kC",button:"JokesList_button__wYok0",form:"JokesList_form__s2VC_",pagination:"JokesList_pagination__h8cl1",pageButton:"JokesList_pageButton__2P18f"}},9671:function(e){e.exports={main:"page_main__GlU4n"}}},function(e){e.O(0,[116,971,23,744],function(){return e(e.s=5306)}),_N_E=e.O()}]);